<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="track-activity">
  
  <template>	
		<iron-ajax id="ajax" url="../bungie.py" handle-as="json" on-response="bindData"></iron-ajax>
        
        <template is="dom-repeat" items={{data}}>
            <mod-card name="{{item.name}}" url="{{item.url}}" role="{{item.role}}" active="{{item.active}}" memberid="{{item.memberid}}"></mod-card>
            <br />
        </template>
        
  </template>

  <script>
	
    Polymer({
      is: "track-activity",
	  
	  attached: function() {
		//alert('YO');
		
		this.getData();
	  },
	  
	  properties: {
		  data: {
			type: Object,
		  }
	  },
	  
	  getData: function() {
            this.$.ajax.generateRequest();
	  },
	  
	  bindData: function(e) {
		//alert("Bingo.");
		console.log(e.detail.response);
        
        this.data = e.detail.response.list;
	  }
	  
    });
  </script>

</dom-module>